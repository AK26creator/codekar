---
---
<div class="codekar-container">
  <div class="letter-group">
    <span class="letter letter-dark">C</span>
    <span class="letter letter-dark">O</span>
    <span class="letter letter-dark">D</span>
    <span class="letter letter-dark">E</span>
  </div>
  <div class="letter-group kar-group">
    <span class="letter letter-gradient">K</span>
    <span class="letter letter-gradient">A</span>
    <span class="letter letter-gradient">R</span>
  </div>
</div>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  // Register ScrollTrigger
  gsap.registerPlugin(ScrollTrigger);

  // Wait for DOM to be ready
  if (typeof window !== 'undefined') {
    // Find the About section as trigger
    const aboutSection = document.querySelector('#about');
    const letters = document.querySelectorAll('.letter');

    if (aboutSection && letters.length > 0) {
      // Create timeline for letters
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: aboutSection,
          start: 'top 80%',        // Start when About section is 80% down viewport
          end: 'bottom 20%',       // End when About section is 20% from top
          scrub: 1,                // Smooth scrubbing, takes 1 second to catch up
          // markers: true,        // Uncomment for debugging
        }
      });

      // Animate letters with stagger
      tl.fromTo(
        letters,
        {
          opacity: 0,
          y: 20,
        },
        {
          opacity: 1,
          y: 0,
          duration: 0.4,
          stagger: 0.15,           // 0.15s delay between each letter
          ease: 'power3.out',
        }
      );
    }
  }
</script>

<style>
  .codekar-container {
    position: fixed;
    left: 2rem;
    top: 50%;
    transform: translateY(-50%);
    z-index: 500;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    pointer-events: none;
  }

  .letter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: flex-start;
  }

  .kar-group {
    margin-top: 0.5rem;
  }

  .letter {
    font-size: 4rem;
    font-weight: 900;
    line-height: 0.9;
    opacity: 0;
    display: block;
    text-transform: uppercase;
    letter-spacing: -0.05em;
  }

  /* CODE letters - Dark Navy */
  .letter-dark {
    color: var(--color-s-primary-dark);
  }

  /* KAR letters - Blue Gradient */
  .letter-gradient {
    background: linear-gradient(135deg, var(--color-s-gradient-start) 0%, var(--color-s-gradient-end) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .codekar-container {
      left: 1rem;
    }
    
    .letter {
      font-size: 3rem;
    }
  }

  @media (max-width: 768px) {
    .codekar-container {
      display: none;
    }
  }
</style>
